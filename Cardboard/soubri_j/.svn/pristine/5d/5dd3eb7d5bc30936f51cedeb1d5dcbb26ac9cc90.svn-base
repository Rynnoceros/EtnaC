/*                                                                                                               
** ETNA PROJECT, 18/10/2018 by soubri_j                                                                          
** character.c                                                                                               
** File description: 
**      File containing all functions related to character actions.
*/
#include "not_rp1.h"
#include "libmy/libmy.h"

/*
    Function to move a character in a direction.
    The function prints out where the target has moved.
    Params :
        target : the character to move
        dir : the direction where to move the character
    Returns :
        0 if ok. 1 otherwise.
*/
int character_move(character_t *target, direction_e dir)
{
    if (target != NULL) {
        switch (dir) {
            case E_FORWARD:
                target->coord[E_Y] -= movement_speed;
                break;
            case E_BACKWARD:
                target->coord[E_Y] += movement_speed;
                break;
            case E_LEFT:
                target->coord[E_X] -= movement_speed;
                break;
            case E_RIGHT:
                target->coord[E_X] += movement_speed;
                break;
            default:
                return 1;
        }
        print_move(target->id, dir);
    }
    return 0;
}

void print_move(int id, direction_e dir)
{
    my_putchar('[');
    my_putnbr(id);
    my_putstr("] moves ");
    my_putstr(movement_direction[dir]);
    my_putchar('\n');
}